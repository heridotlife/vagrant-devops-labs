---
#############################################################################
# kube-scheduler - Download Tasks
#############################################################################

- name: Create temporary download directory
  file:
    path: /tmp/kubernetes-download
    state: directory
    mode: '0755'

- name: Download kube-scheduler binary
  get_url:
    url: "{{ k8s_download_url }}/kube-scheduler"
    dest: /tmp/kubernetes-download/kube-scheduler
    mode: '0755'
    timeout: 300
  register: download_result
  retries: 3
  delay: 5
  until: download_result is succeeded

- name: Verify kube-scheduler binary
  stat:
    path: /tmp/kubernetes-download/kube-scheduler
  register: scheduler_binary
  failed_when: not scheduler_binary.stat.exists or scheduler_binary.stat.size == 0

- name: Display download information
  debug:
    msg:
      - "kube-scheduler binary downloaded successfully"
      - "Size: {{ (scheduler_binary.stat.size / 1024 / 1024) | round(2) }} MB"
